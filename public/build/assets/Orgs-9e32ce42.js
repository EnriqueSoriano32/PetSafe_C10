import{j as e,a as f,r as j,Y as y}from"./app-1232777b.js";import{M as L}from"./ModalForm-c7f8db30.js";import{I as c}from"./Input-c7792e37.js";import{z as n,u as v,t as z}from"./zod-f39d316b.js";import{_ as m}from"./index-c96e2231.js";import{M as N}from"./Map-f457f658.js";import{A as C}from"./AdminLayout-f049c568.js";import"./dialog-bcdb0582.js";import"./transition-76c4e644.js";/* empty css                */import"./Dropdown-fdee1dac.js";import"./ResponsiveNavLink-8d83e236.js";const E=n.object({nombre_organizacion:n.string().min(1,{message:"El nombre es obligatorio"}).max(255,{message:"El nombre no puede exceder 255 caracteres"}),latLng:n.object({lat:n.number().min(-90).max(90,{message:"La latitud debe estar entre -90 y 90."}),lng:n.number().min(-180).max(180,{message:"La longitud debe estar entre -180 y 180."})}).optional().refine(r=>r&&r.lat!==void 0&&r.lng!==void 0,{message:"Selecciona el punto en el mapa"}),telefono:n.string().min(1,{message:"El teléfono es obligatorio"}).max(20,{message:"El teléfono no puede exceder 20 caracteres"}),ubicacion:n.string().min(1,{message:"La ubicación es obligatoria"}).max(255,{message:"La ubicación no puede exceder 255 caracteres"}),email:n.string().email({message:"El email no es válido"})}),O=({open:r,onClose:o})=>{const{register:s,reset:t,setValue:a,watch:u,handleSubmit:b,formState:{errors:i,isSubmitting:l}}=v({mode:"onChange",resolver:z(E)}),p=d=>{f.post("/panel/admin/organizaciones/store",d).then(()=>{t(),o(),m.success("Organización creada")}).catch(()=>{m.error("Ocurrió un error")})},g=()=>{b(p)()},x=()=>{t(),o()},h=u("latLng");return e.jsx(L,{title:"Crear organización",show:r,onClose:o,closeable:!1,description:"Completa la información de la organización",primaryAction:g,secondaryAction:x,primaryLabel:"Enviar",secondaryLabel:"Cancelar",children:e.jsxs("form",{className:"space-y-6 px-5 py-2",children:[e.jsx(c,{id:"nombre_organizacion",label:"Nombre",required:!0,type:"text",errors:i.nombre_organizacion,disabled:l,register:s}),e.jsx(c,{id:"ubicacion",label:"Ubicación",required:!0,type:"text",errors:i.ubicacion,disabled:l,register:s}),e.jsx(c,{id:"telefono",label:"Teléfono",required:!0,type:"number",errors:i.telefono,disabled:l,register:s}),e.jsx(c,{id:"email",label:"Correo",required:!0,type:"email",errors:i.email,disabled:l,register:s}),e.jsx(N,{label:"Selecciona la ubicación en el mapa",errors:i.latLng,value:h,setValue:d=>a("latLng",d,{shouldValidate:!0})})]})})},U=({orgs:r})=>{const[o,s]=j.useState(!1),t=()=>{s(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Organizaciones"}),e.jsx(O,{open:o,onClose:()=>s(!1)}),e.jsx(C,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Organizaciones"}),e.jsx("button",{className:"bg-green-500 text-white px-4 py-1 rounded-md hover:bg-green-600",onClick:t,children:"Crear"})]}),children:e.jsx("div",{className:"p-12",children:(r==null?void 0:r.length)>0?r==null?void 0:r.map(a=>e.jsxs("div",{className:"rounded-md shadow-md bg-white p-2",children:[e.jsxs("p",{children:["Nombre: ",a==null?void 0:a.nombre_organizacion]}),e.jsxs("p",{children:["Teléfono: ",a==null?void 0:a.telefono]}),e.jsxs("p",{children:["Nombre: ",a==null?void 0:a.ubicacion]})]},a==null?void 0:a.id)):e.jsx("div",{children:"No hay registros"})})})]})};export{U as default};
