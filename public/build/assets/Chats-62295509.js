import{q as a,j as s,y as g,Y as y}from"./app-d5549e23.js";import{f as b}from"./formatoChat-bcec50f1.js";import{u as c}from"./useQuery-ceae295e.js";import{G as N}from"./GuestLayout-860914da.js";import"./zod-21fc237b.js";import"./Modal-90278108.js";import"./dialog-752e7445.js";import"./transition-ab35fa89.js";import"./Input-de3d769c.js";import"./index-76830549.js";import"./Dropdown-59417614.js";import"./Select-3a788152.js";import"./Dropzone-ed3795da.js";import"./TextArea-466a9d21.js";import"./ModalForm-2d4f16e9.js";function w({chat:e,notRead:n=!1}){var o,l,t,m,d,p,x,f,u;const{auth:r}=a().props,i=j=>{j.stopPropagation(),g.visit(`/chats/${e==null?void 0:e.id}`)};return s.jsxs("div",{className:`flex items-center gap-2 border-b-2 p-2 cursor-pointer ${n?"bg-blue-50":""}`,onClick:i,children:[s.jsxs("div",{className:"flex items-center gap-2 w-1/3",children:[(o=e==null?void 0:e.person)!=null&&o.foto?s.jsx("img",{src:(l=e==null?void 0:e.person)==null?void 0:l.foto,alt:"profile image",className:"rounded-full w-10 h-10"}):s.jsx("div",{className:"bg-blue-500 text-white font-bold flex justify-center items-center rounded-full w-10 h-10 aspect-square text-sm",children:(m=(t=e==null?void 0:e.person)==null?void 0:t.nombre)==null?void 0:m.charAt(0)}),s.jsx("p",{className:"font-bold truncate",children:(d=e==null?void 0:e.person)==null?void 0:d.nombre})]}),s.jsxs("p",{className:`w-1/3 ${n?"font-bold":"text-gray-400 font-light"}`,children:[((p=r==null?void 0:r.user)==null?void 0:p.id)===((x=e==null?void 0:e.ultimo_mensaje)==null?void 0:x.user_id)?"TÃº: ":"",(f=e==null?void 0:e.ultimo_mensaje)==null?void 0:f.contenido]}),s.jsx("p",{className:`w-1/3 ${n?"font-bold":"font-light text-gray-400"}`,children:b((u=e==null?void 0:e.ultimo_mensaje)==null?void 0:u.created_at)})]})}const v=()=>{const e=async()=>(await fetch("/mychats",{headers:{Accept:"application/json"}})).json(),{data:n,isLoading:r}=c({queryKey:["chats"],queryFn:e,refetchInterval:!1});return{data:n,isLoading:r}},C=()=>{const{data:e,isLoading:n}=v(),r=e==null?void 0:e.chats,i=e==null?void 0:e.notificaciones;return s.jsxs(s.Fragment,{children:[s.jsx(y,{title:"Bandeja de mensajes"}),s.jsxs("div",{className:"px-12 w-full flex flex-col xl:items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-700 my-5",children:"Bandeja de mensajes"}),s.jsx("div",{className:"w-full xl:w-1/2",children:(r==null?void 0:r.length)===0?s.jsx("p",{children:"No hay mensajes"}):s.jsx("div",{children:r==null?void 0:r.map(o=>s.jsx(w,{chat:o,notRead:i==null?void 0:i.some(l=>l.data.chat_id===o.id)},o==null?void 0:o.id))})})]})]})};C.layout=e=>s.jsx(N,{children:e});export{C as default};
