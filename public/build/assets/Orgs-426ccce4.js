import{j as e,a as f,r as j,Y as y}from"./app-d5549e23.js";import{M as z}from"./ModalForm-2d4f16e9.js";import{I as l}from"./Input-de3d769c.js";import{z as a,u as C,t as L}from"./zod-21fc237b.js";import{_ as m}from"./index-76830549.js";import{M as v}from"./Map-2954c4ef.js";import{A as O}from"./AdminLayout-4a24a3a0.js";import{X as S}from"./index.es-60a9f209.js";import"./transition-ab35fa89.js";import"./dialog-752e7445.js";import"./Dropdown-59417614.js";import"./ResponsiveNavLink-f9744a9b.js";const E=a.object({nombre_organizacion:a.string().min(1,{message:"El nombre es obligatorio"}).max(255,{message:"El nombre no puede exceder 255 caracteres"}),latLng:a.object({lat:a.number().min(-90).max(90,{message:"La latitud debe estar entre -90 y 90."}),lng:a.number().min(-180).max(180,{message:"La longitud debe estar entre -180 y 180."})}).optional().refine(r=>r&&r.lat!==void 0&&r.lng!==void 0,{message:"Selecciona el punto en el mapa"}),telefono:a.string().min(1,{message:"El teléfono es obligatorio"}).max(20,{message:"El teléfono no puede exceder 20 caracteres"}),ubicacion:a.string().min(1,{message:"La ubicación es obligatoria"}).max(255,{message:"La ubicación no puede exceder 255 caracteres"}),email:a.string().email({message:"El email no es válido"})}),N=({open:r,onClose:t})=>{const{register:o,reset:i,setValue:d,watch:g,handleSubmit:u,formState:{errors:s,isSubmitting:n}}=C({mode:"onChange",resolver:L(E)}),p=c=>{f.post("/panel/admin/organizaciones/store",c).then(()=>{i(),t(),m.success("Organización creada")}).catch(()=>{m.error("Ocurrió un error")})},b=()=>{u(p)()},x=()=>{i(),t()},h=g("latLng");return e.jsx(z,{title:"Crear organización",show:r,onClose:t,closeable:!1,description:"Completa la información de la organización",primaryAction:b,secondaryAction:x,primaryLabel:"Enviar",secondaryLabel:"Cancelar",children:e.jsxs("form",{className:"space-y-6 px-5 py-2",children:[e.jsx(l,{id:"nombre_organizacion",label:"Nombre",required:!0,type:"text",errors:s.nombre_organizacion,disabled:n,register:o}),e.jsx(l,{id:"ubicacion",label:"Ubicación",required:!0,type:"text",errors:s.ubicacion,disabled:n,register:o}),e.jsx(l,{id:"telefono",label:"Teléfono",required:!0,type:"number",errors:s.telefono,disabled:n,register:o}),e.jsx(l,{id:"email",label:"Correo",required:!0,type:"email",errors:s.email,disabled:n,register:o}),e.jsx(v,{label:"Selecciona la ubicación en el mapa",errors:s.latLng,value:h,setValue:c=>d("latLng",c,{shouldValidate:!0})})]})})},F=[{name:"Nombre",selector:r=>r.nombre_organizacion},{name:"Teléfono",selector:r=>r.telefono},{name:"Dirección",selector:r=>r.ubicacion}],w={rows:{style:{minHeight:"72px"}},headCells:{style:{fontSize:"16px",fontWeight:"bold",backgroundColor:"#BF9F63",textColor:"white"}},cells:{style:{fontSize:"14px"}}},R=({orgs:r})=>{const[t,o]=j.useState(!1),i=()=>{o(!0)};return console.log(r),e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Organizaciones"}),e.jsx(N,{open:t,onClose:()=>o(!1)}),e.jsx(O,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Organizaciones"}),e.jsx("button",{className:"bg-green-500 text-white px-4 py-1 rounded-md hover:bg-green-600",onClick:i,children:"Crear"})]}),children:e.jsx("div",{className:"p-12",children:e.jsx(S,{columns:F,data:r,highlightOnHover:!0,striped:!0,noDataComponent:e.jsx("div",{style:{padding:"10px",color:"red"},children:"No hay datos disponibles"}),customStyles:w})})})]})};export{R as default};
